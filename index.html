<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro RMA</title>
    <style>
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background-color: #f4f7f6; 
            margin: 0; 
            padding: 0; 
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        /* NAVBAR SUPERIOR */
        .navbar { background: #2c3e50; padding: 10px 20px; text-align: right; }
        .navbar a { color: white; text-decoration: none; font-weight: bold; background: #34495e; padding: 8px 15px; border-radius: 4px; font-size: 0.9rem;}
        .navbar a:hover { background: #1abc9c; }

        /* LAYOUT PRINCIPAL (3 COLUMNAS) */
        .main-wrapper {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 20px;
            padding: 20px;
            flex: 1; /* Empuja el footer hacia abajo */
        }

        /* IMÁGENES LATERALES */
        .side-banner {
            width: 300px; /* Tamaño solicitado */
            height: auto;
            max-height: 600px;
            object-fit: cover;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* CONTENEDOR CENTRAL (FORMULARIO) */
        .form-container { 
            flex: 1;
            max-width: 800px; 
            background: white; 
            border-radius: 8px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
            overflow: hidden; /* Para que el header no se salga */
        }

        /* HEADER DEL FORMULARIO */
        .form-header-img {
            width: 100%;
            height: auto;
            display: block;
            max-height: 200px; /* Limite de altura para que no ocupe toda la pantalla */
            object-fit: cover;
        }

        .form-content { padding: 30px; }
        h1 { text-align: center; color: #2c3e50; margin-top: 0; }

        /* GRID DEL FORMULARIO */
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .full-width { grid-column: span 2; }
        
        label { display: block; margin-bottom: 5px; font-weight: bold; color: #555; font-size: 0.9rem; }
        input, select, textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        input:focus, select:focus, textarea:focus { border-color: #3498db; outline: none; }

        /* BOTÓN */
        .btn-save { background-color: #27ae60; color: white; width: 100%; padding: 15px; border: none; border-radius: 5px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 20px; }
        .btn-save:hover { background-color: #2ecc71; }
        .btn-save:disabled { background-color: #bdc3c7; }

        /* FOOTER */
        footer {
            background-color: #2c3e50;
            color: white;
            text-align: center;
            padding: 15px;
            font-size: 0.9rem;
            margin-top: auto;
        }

        /* RESPONSIVE: MÓVIL Y TABLET */
        @media (max-width: 1100px) {
            .side-banner { display: none; } /* Oculta laterales en pantallas medianas/pequeñas */
            .main-wrapper { padding: 10px; }
        }
        @media (max-width: 600px) {
            .form-grid { grid-template-columns: 1fr; }
            .full-width { grid-column: span 1; }
            .form-content { padding: 15px; }
        }
    </style>
</head>
<body>

    <div class="navbar">
        <a href="consulta.html">Ir a Consultar Estatus &rarr;</a>
    </div>

    <div class="main-wrapper">
        <img src="https://raw.githubusercontent.com/r0g3rca/rma_firstsystem/main/imagenes/1.png" alt="Publicidad Izquierda" class="side-banner">

        <div class="form-container">
            <img src="https://raw.githubusercontent.com/r0g3rca/rma_firstsystem/main/imagenes/header.png" alt="Encabezado" class="form-header-img">
            
            <div class="form-content">
                <h1>Nueva Orden de Servicio</h1>
                <form id="formRMA">
                    <div class="form-grid">
                        <div>
                            <label>N° Orden:</label>
                            <input type="number" name="orden" required placeholder="Ej: 1001" min="1">
                        </div>
                        <div>
                            <label>Fecha Recepción:</label>
                            <input type="text" value="HOY" disabled style="background: #eee;">
                        </div>
                        
                        <div>
                            <label>Vendedor/Receptor:</label>
                            <select name="vendedor" required>
                                <option value="" disabled selected>-- Seleccione --</option>
                                <option value="MAYRA">MAYRA</option>
                                <option value="HAROLD">HAROLD</option>
                                <option value="VICTOR">VICTOR</option>
                                <option value="MAILIN">MAILIN</option>
                                <option value="VENDEDOR 5">VENDEDOR 5</option>
                                <option value="VENDEDOR 6">VENDEDOR 6</option>
                                <option value="VENDEDOR 7">VENDEDOR 7</option>
                            </select>
                        </div>

                        <div>
                            <label>N° Control:</label>
                            <input type="text" name="control">
                        </div>
                        <div>
                            <label>Código Artículo:</label>
                            <input type="text" name="codigo">
                        </div>
                        <div>
                            <label>Serial:</label>
                            <input type="text" name="serial" required>
                        </div>
                        <div class="full-width">
                            <label>Descripción del Equipo:</label>
                            <input type="text" name="descripcion" placeholder="Marca, Modelo, Color..." required>
                        </div>
                        <div>
                            <label>Procedencia:</label>
                            <input type="text" name="procedencia">
                        </div>
                        <div>
                            <label>Accesorios:</label>
                            <input type="text" name="accesorios">
                        </div>
                        <div class="full-width">
                            <label>Falla Reportada:</label>
                            <textarea name="falla" rows="3" required placeholder="Describa el problema..."></textarea>
                        </div>
                        
                        <div class="full-width" style="border-top: 1px solid #eee; margin-top: 10px; padding-top: 10px;">
                            <strong style="color:#2c3e50;">Datos del Cliente</strong>
                        </div>
                        <div>
                            <label>Nombre Cliente:</label>
                            <input type="text" name="recepcion">
                        </div>
                        <div>
                            <label>Teléfono:</label>
                            <input type="tel" name="telefono">
                        </div>
                        <div class="full-width">
                            <label>Correo Electrónico:</label>
                            <input type="email" name="email">
                        </div>
                    </div>
                    <button type="submit" id="btnGuardar" class="btn-save">Guardar Orden</button>
                </form>
                <p id="mensajeRegistro" style="text-align: center; font-weight: bold; margin-top:10px;"></p>
            </div>
        </div>

        <img src="https://raw.githubusercontent.com/r0g3rca/rma_firstsystem/main/imagenes/2.png" alt="Publicidad Derecha" class="side-banner">
    </div>

    <footer>
        &copy; 2025 Sistema de Gestión RMA - Todos los derechos reservados.
    </footer>

    <script>
        // URL DE TU SCRIPT
        const URL_SCRIPT = "https://script.google.com/macros/s/AKfycbxFIfG13unVkkXwc_fiAwVfPtAAiLzWj4KEXosKiVH9TJIxf_vwKN61sChmK-Ue9-NXNg/exec";

        const form = document.getElementById('formRMA');
        form.addEventListener('submit', e => {
            e.preventDefault();
            const btn = document.getElementById('btnGuardar');
            const msg = document.getElementById('mensajeRegistro');
            
            if (form.vendedor.value === "") { alert("Seleccione un vendedor"); return; }

            btn.disabled = true;
            btn.innerText = "Guardando...";
            msg.innerText = "";

            const formData = new FormData(form);
            fetch(URL_SCRIPT, { method: 'POST', body: formData })
            .then(r => r.text())
            .then(data => {
                msg.innerText = "¡Guardado con Éxito!";
                msg.style.color = "green";
                form.reset();
                form.vendedor.value = "";
            })
            .catch(e => { msg.innerText = "Error de conexión"; msg.style.color = "red"; })
            .finally(() => { btn.disabled = false; btn.innerText = "Guardar Orden"; });
        });
    </script>
</body>
</html>
